<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Title</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>

    <div class="navbar">
  <div class="logo" style="font-family:'Segoe UI'; font-weight: bolder; font-size: x-large;
  color: rgb(77, 77, 135) !important;
   ">KURSUSIT.ID</div>
<div class="menu">
    <button onclick="scrollToSection('programs')">Programs</button>
    <button onclick="scrollToSection('informasi')">Informasi</button>
    <button onclick="scrollToSection('profile')">Profile</button>
    <button onclick="scrollToSection('news')">News</button>
    <button onclick="scrollToSection('gallery')">Gallery</button>
    <button onclick="scrollToSection('contact')">Contact</button>
</div>
    </div>

    <div class="main">
        <div class="account" id="account">
            <div id="loggedname"></div>
            <button onclick="openLoginModal()">Login</button>
            <button onclick="openModal()">register</button>
            <!-- <button onclick="openLogoutModal()">logout</button> -->
        </div>
        <div class="programs" id="programs">
            <H2 style="margin-left: 1%;">Pelatihan yang disediakan</H2>
            <div class="programs1">
                <div class="card">
                    <h2>Cyber Security</h2>
                </div>
                <div class="card">
                    <h2>Fullstack Web development</h2>
                </div>
                <div class="card">
                    <h2>Data Centre Facilities Management</h2>
                </div>
                <div class="card">
                    <h2>Enterprise Architecture with TOGAF</h2>
                </div>
                <div class="card">
                    <h2>IT Risk and Audit with COBIT 2019</h2>
                </div>
                <div class="card">
                    <h2>IT Management with ITIL v4</h2>
                </div>
            </div>
        </div>
        <div class="Informasi" id="informasi">
            <div></div>
            <div style="width: 100%;">
                <h2 style="margin-left: 1%;">Informasi pelatihan</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Nama Pelatihan</th>
                            <th>Batch</th>
                            <th>Pelaksanaan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Cyber Security</td>
                            <td>Batch 4</td>
                            <td>Dimulai 10 Maret 2024</td>
                        </tr>
                        <tr>
                            <td>Data Centre</td>
                            <td>Batch 4</td>
                            <td>Dimulai 10 Maret 2024</td>
                        </tr>
                        <tr>
                            <td>Web development</td>
                            <td>Batch 4</td>
                            <td>Dimulai 10 Maret 2024</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <div id="profile" class="profil" style="display: flex; flex-direction: column;">
            <div>
                <H2 style="margin-left: 1%;">Profil lembaga</H2>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div class="profiltitle" style="align-items: center; text-align: center;">
                    <H2 style="line-height: 10%; margin-top: 20px;">Apa itu</H2>
                    <H1>KURSUSIT.id??</H1>
                </div>
                <div class="desc">
                    <p>KURSUSIT.id adalah platform marketplace edukasi IT dan pengembangan diri berbasis online yang
                        dapat diakses kapan saja dan di mana saja untuk mendampingi generasi muda Indonesia
                        #sampaijadibisa
                    </p>
                </div>
            </div>
            <div class="descprofil" style="display: flex; flex-direction: row; width: 100%; margin-bottom: 10%;">
                <div style="width: 8%;"></div>
                <div style="width: 90%;"> Sebuah pertanyaan dalam hati nurani, "Apa bener pendidikan cuman dibatasi oleh
                    sekolah formal?" Faktanya, engga semua orang bisa sekolah formal dan nyatanya pendidikan formal
                    belum bisa menyelesaikan masalah pengangguran di Indonesia. Di awal tahun 2019, kami coba membuat
                    platform pendidikan vokasi untuk menjembatani skill gap yang dirasakan Generasi Y dan Z di Indonesia
                    agar bisa berkompetisi di industri yang super cepat ini.
                    Saat ini, 250.000+ user sudah belajar dan menjadi member di platform Luarsekolah, sudah puluhan
                    trainer juga yang sudah mendaftar dan menjadi mentor di paltform kita. Masih banyak yang mesti kita
                    lakukan, dengan bantuan kawan-kawan semua, kita bisa bangun pendidikan Indonesia menuju ke arah yang
                    lebih baik.</div>
            </div>
            <div style="width: 2%;"></div>
        </div>

        <div class="berita" style="background-image: url(./src/image/bg3.jpg);" id="news">
            <div>
                <h2 style="margin-left: 1%;">
                    Berita dan artikel
                </h2>
            </div>
            <div class="berita1" style="display: flex; flex-direction: row;">
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 1.jpeg" alt="gambar1">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">Teknisi Komputer: Tugas, Skill yang Harus Dimiliki dan Jurusan
                            Kuliahnya</h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">
                        pernah mendengar profesi teknisi komputer? Apa saja tugas teknisi komputer dan skill apa yang
                        harus dimiliki?
                    </div>
                    <button class="read-button">Read</button>
                </div>
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 2.jpg" alt="gambar2">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">Kemdikbud & Harvard University Luncurkan Pelatihan Digital buat
                            Guru, Yuk Daftar!</h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">
                        Kemendikbudristek, LPDP, dan Harvard University membuka program pelatihan skill digital untuk
                        guru. Sertifikat dari Harvard!
                    </div>
                    <button class="read-button">Read</button>

                </div>
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 3.jpg" alt="gambar3">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">
                            Teknologi Informasi: Pengertian, Fungsi, Contoh, dan Prediksi Masa Depan
                        </h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">

                        Teknologi informasi atau TI berpengaruh besar pada kehidupan manusia. Ketahui pengertian,
                        fungsi, contoh penerapan, dan prediksi di masa depan.
                    </div>
                    <button class="read-button">Read</button>

                </div>
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 4.jpg" alt="gambar4">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">
                            ITS Buka Prodi S1 Rekayasa AI & Perangkat Lunak, Begini Prospeknya
                        </h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">
                        ITS membuka prodi S1 Rekayasa Perangkat Lunak (Software Engineering) dan S1 Rekayasa Kecerdasan
                        Buatan (Artificial Intelligence/AI Engineering), nih!
                    </div>
                    <button class="read-button">Read</button>

                </div>
            </div>
            <div style="text-align: right;">
                more>>
            </div>

        </div>
        <div class="galeri" id="gallery">
            <div>
                <H2 style="margin-left: 1%;">
                    Galeri
                </H2>
            </div>

            <div class="gallery-wrap">
                <img src="./src/image/back.png" alt="" id="backBtn"/>
                <div class="gallery">
                  <div style="height: 300px !important;">
                    <span><img src="./src/image/devops.jpg" alt="" /></span>
                    <span><img src="./src/image/database.jpg" alt="" /></span>
                    <span><img src="./src/image/db.jpg" alt="" /></span>
                  </div>
                  <div style="height: 300px !important;">
                    <span><img src="./src/image/data.jpg" alt="" /></span>
                    <span>
                        <video id="myVideo" src="./src/video/web2.mp4" controls autoplay loop></video>
                    </span>
                    <span>
                        <video id="myVideo" src="./src/video/web1.mp4" controls autoplay loop></video>
                    </span>
                  </div>
                </div>
                <img src="./src/image/next.png" alt="" id="nextBtn"/>
              </div>
        </div>
    </div>
    </div>

    <div class="footer" id="contact" style="display: flex; flex-direction: column;">
        <div class="contact">
            <h2 style="margin-left: 1%;">
                Contact
            </h2>
        </div>
        <div class="contact2"
            style="width: 100%; display: flex; flex-direction: row; justify-content: center; align-items: center;">
            <div style="width: 50%; text-align: justify; padding: 20px;">
                Tertarik untuk mengetahui lebih lanjut mengenai KURSUSIT.ID training ataupun sertifikasi? atau pertanyaan
                lainnya? anda dapat bertanya secara langsung melalui chat whatsapp kami.
            </div>
            <div style="width: 25%; text-align: justify;">
                <ul>
                    <p>Contacts</p>
                    <li>Jl Permata senaya no 18</li>
                    <li>info@kursusit@gmail.com</li>
                    <li>0822118111199</li>
                    <li>Senin - Jumat 09.00 - 21.00</li>
                </ul>
            </div>
            <div style="width: 25%; text-align: justify;">
                <p>Services</p>
                <ul>
                    <li>Training</li>
                    <li>Sertifikasi</li>
                    <li>Event</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModalreg()">&times;</span>
          <h2>Register</h2>
          <form id="registerForm">
            <label for="fullname">Nama Lengkap:</label>
            <input type="text" id="fullname" name="fullname" required><br>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required><br>
            
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required><br>
            
            <label for="address">Alamat:</label>
            <textarea id="address" name="address" required></textarea><br>
            
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select><br>
            
            <button type="submitregister" id="registerButton">Daftar</button>
          </form>
        </div>
      </div>

          <!-- Modal Login -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Login</h2>
            <form id="loginForm">
                <label for="emailLogin">email:</label>
                <input type="text" id="emailLogin" name="emailLogin" required>
    
                <label for="passwordLogin">Password:</label>
                <input type="password" id="passwordLogin" name="passwordLogin" required>
    
                <button type="submitlogin" id="loginButton">Login</button>
            </form>
        </div>
    </div>
      

<script>


//##############################       modal ######################
  // Fungsi untuk menampilkan modal register
  function openModal() {
      var modal = document.getElementById("registerModal");
      modal.style.display = "block";
  }

  // Fungsi untuk menutup modal register
  function closeModalreg() {
      var modal = document.getElementById("registerModal");
      modal.style.display = "none";
  }

  // Fungsi untuk menampilkan modal login
  function openLoginModal() {
      var modal = document.getElementById("loginModal");
      modal.style.display = "block";
  }

  // Fungsi untuk menutup modal login
  function closeModal() {
      var modal = document.getElementById("loginModal");
      modal.style.display = "none";
  }

  // Fungsi untuk scroll otomatis
  function scrollToSection(sectionId) {
      var section = document.getElementById(sectionId);
      if (section) {
          window.scrollTo({
              top: section.offsetTop,
              behavior: 'smooth' // Animasi scroll
          });
      }
  }

  // Fungsi untuk melakukan registrasi
  document.getElementById('registerButton').addEventListener('click', async function(event) {
      event.preventDefault();
      
      const formData = new FormData(document.getElementById('registerForm'));
      const requestData = Object.fromEntries(formData.entries());
      
      try {
          const response = await fetch('/users/register', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify(requestData)
          });

          if (!response.ok) {
              const errorMessage = await response.text();
              throw new Error(errorMessage);
          }

          alert('Registrasi berhasil!');
          closeModalreg();

      } catch (error) {
          console.error('Error during registration:', error);
          alert('Registrasi gagal. Silakan coba lagi.');
      }
  });

  // Fungsi untuk melakukan login
  document.getElementById('loginForm').addEventListener('submit', async function(event) {
      event.preventDefault();

      const email = document.getElementById('emailLogin').value;
      const password = document.getElementById('passwordLogin').value;

      try {
          const response = await fetch('/users/login', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email, password })
          });

          const responseData = await response.json();

          if (response.ok) {
              alert(responseData.message);
              closeModal();
              displayLogoutButton()
              displayFullname() //memanggil nama user yang akan ditampilkan ke web 
            

          } else {
              alert(responseData.message);
          }
      } catch (error) {
          console.error('Error during login:', error);
          alert('Login gagal. Silakan coba lagi.');
      }
  });


  //######################### percobaan ambil nama ##############################
  async function getFullnameByEmail(email) {
    try {
        console.log('tes email', email);
        const response = await fetch(`/users/fullname?email=${email}`);
        const data = await response.json();
        console.log('tes email 2', data);
        return data.fullname;
    } 
    catch (error) {
        console.error('Error fetching fullname:', error);
        throw new Error('Failed to fetch fullname');
    }
}

// Fungsi untuk menampilkan fullname di halaman HTML
async function displayFullname() {
    const emailInput = document.getElementById('emailLogin').value;
    try {
        const fullname = await getFullnameByEmail(emailInput);
        const loggednameElement = document.getElementById('loggedname');
        loggednameElement.innerHTML = `
        <h2 class="ambilnamaloginuser" ">Selamat Datang! ${fullname}</h2>`;
    } catch (error) {
        console.error('Failed to display fullname:', error);
    }
}



//################### percobaan pergantian tombol #######################
async function displayLogoutButton() {
    const accountDiv = document.getElementById('account');
    // Sembunyikan tombol login dan register
    accountDiv.innerHTML = `
        <div id="loggedname">aa</div>
        <button onclick="openLogoutModal()">Logout</button>
    `;
    
    // Mengatur tombol login dan register menjadi nonaktif setelah tombol logout ditampilkan
    document.getElementById('loginButton').disabled = true;
    document.getElementById('registerButton').disabled = true;

    document.addEventListener('DOMContentLoaded', function() {
    // Panggil displayLogoutButton() di sini
    displayLogoutButton();
});
}




//############################################################## slider
let scrollContainer = document.querySelector('.gallery')
        let backBtn = document.getElementById('backBtn')
        let nextBtn = document.getElementById('nextBtn')

        scrollContainer.addEventListener("wheel", (evt) => {
            evt.preventDefault()
            scrollContainer.scrollLeft += evt.deltaY;
            scrollContainer.style.scrollBehavior = 'auto'

        })

        nextBtn.addEventListener("click", ()=> {
            scrollContainer.style.scrollBehavior = 'smooth'
            scrollContainer.scrollLeft += 900
        })

        backBtn.addEventListener("click", ()=> {
            scrollContainer.style.scrollBehavior = 'smooth'
            scrollContainer.scrollLeft -= 900
        })

</script>
    </body>
</html>