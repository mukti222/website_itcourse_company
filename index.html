<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Website Title</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>

<div class="navbar">
    <div class="logo" style="font-family:'Segoe UI'; font-weight: bolder; font-size: x-large; color: rgb(77, 77, 135) !important;">
        KURSUSIT.ID</div>
        <div class="searchbox" onclick="openSearchModal()">
            <img src="./src/image/searchicon.png" alt="Search Icon" class="search-icon">
        </div>

        <div id="searchModal" class="modal">
            <div class="modal-content-search">
                <span class="close" onclick="closeSearchModal()">&times;</span>
                <input type="text" id="searchInput" placeholder="Search Courses" class="search-input">
                <button onclick="search()">Search</button>
            </div>
        </div>

        <!-- Konten hasil pencarian -->
<div id="searchResultsModal" class="modal">
    <div class="modal-content-search-display" id="searchResultsContent">
    </div>
</div>

        <!-- Container for displaying courses -->
        <div id="coursesContainer" class="courses-container">
            <!-- Courses will be dynamically added here -->
        </div>
        
        
        <!-- ############################### percobaan modal course ############################ -->
        <div id="myModal" class="modal">
            <div class="modal-content-course">
                <span class="closecourse">&times;</span>
                <div class="modalcourses" style="border-radius: 50px;">
                    <div class="coursecontainleft">
                        <img id="modalImage" src="" alt="Course Image">
                    </div>
                    <div class="coursecontainright">
                        <div class="coursecardtitle">
                            <h3 id="modalTitle"></h3>
                        </div>
                        <div class="coursecarddesc">
                            <p id="modalDescription"></p>
                        </div>
                        <div class="coursecuricullum">
                            <p id="modalCurriculum"></p>
                        </div>
                        <div class="jadwalcourse">
                            <p> Jadwal : Setiap Hari Jumat - Minggu Jam 19.00 - 21.00</p>
                        </div>
                        <div class="mentor">
                            <p id="modalMentor"></p>
                        </div>
                        <div class="coursecost">
                            <p id="modalCost"></p>
                        </div>
                        <div style="display: flex;
                        justify-content: right;
                        align-items: right;">
                            <button style="background-color: #1E488F; 
               background-image: linear-gradient(to bottom, #0a49b5, #15545e); 
               color: white; /* Warna teks putih */
               border: none; /* Tidak ada border */
               border-radius: 10px; /* Corner bulat */
               padding: 10px 20px; /* Padding */
               font-size: 16px; /* Ukuran font */
               cursor: pointer; /* Kursor pointer */
               box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08); /* Shadow */
               margin: 10px;
               display: flex;
               justify-content: right;
               align-items: right;
               outline: none; /* Tidak ada outline saat focus */">Daftar</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- ############################### percobaan ############################ -->


        <!-- ################################ percobaan modal account base ############### -->
<div id="accountModal" class="modal">
    <div class="modal-content" style="display: flex; flex-direction: column; justify-content: center; align-items: center; border-radius: 20px;">
        <span class="close" onclick="closeAccountModal()" style="display: flex; margin-left: 340px;">&times;</span>
        <div id="modalAccountBase" class="modal-account-base" style="">
            <div><h2>My Account Information</h2></div>
            <div><img style="object-fit: cover; border-radius: 20px;" src="./src/image/accountplace.jpg" alt=""></div>
            <div id="accountfullname" class="account-info"></div>
            <div id="accountemail" class="account-info"></div>
            <div id="gender" class="account-info"></div>
            <div id="address" class="account-info"></div>
        </div>
    </div>
</div>
        <!-- ################################ percobaan modal account base ############### -->


    <div class="menu">
        <button onclick="scrollToSection('programs')">Programs</button>
        <button onclick="scrollToSection('informasi')">Informasi</button>
        <button onclick="scrollToSection('profile')">Profile</button>
        <button onclick="scrollToSection('news')">News</button>
        <button onclick="scrollToSection('gallery')">Gallery</button>
        <button onclick="scrollToSection('contact')">Contact</button>
        <button onclick="openAccountModal()" >Account</button>
    </div>
</div>

    <div class="main">
        <div class="account" id="account">
            <div id="loggedname"></div>
            <button onclick="openLoginModal()">Login</button>
            <button onclick="openModal()">register</button>
            <!-- <button onclick="openLogoutModal()">logout</button> -->
        </div>
        <div class="programs" id="programs">
            <H2 style="margin-left: 1%;">Pelatihan yang disediakan</H2>
            <div class="programs1" id="programs1">
            </div>
        </div>
        <div class="Informasi" id="informasi">
            <div></div>
            <div style="width: 100%;">
                <h2 style="margin-left: 1%;">Informasi pelatihan mendatang</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Nama Pelatihan</th>
                            <th>Batch</th>
                            <th>Pelaksanaan</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Cyber Security</td>
                            <td>Batch 4</td>
                            <td>Dimulai 10 Maret 2024</td>
                        </tr>
                        <tr>
                            <td>Data Centre</td>
                            <td>Batch 4</td>
                            <td>Dimulai 10 Maret 2024</td>
                        </tr>
                        <tr>
                            <td>Web development</td>
                            <td>Batch 4</td>
                            <td>Dimulai 10 Maret 2024</td>
                        </tr>
                    </tbody>
                </table>
                <div style="padding-left: 30px; width: 90%; display: flex; align-items: center; justify-content: center;"><p style="">
                    Tertarik untuk mengembangkan keahlian Anda dalam bidang Cyber Security, Data Centre Management, dan Web Development? Kami punya kabar baik! Kami sedang mengadakan diskon spesial untuk Batch 4 yang akan dimulai pada tanggal 10 Maret 2024. Jangan lewatkan kesempatan ini untuk mengikuti pelatihan dengan harga terjangkau dan mendapatkan pengetahuan yang berharga dalam dunia teknologi informasi. Segera daftarkan diri Anda dan manfaatkan diskon ini sebelum kehabisan tempat!
                </p></div>
            </div>
        </div>
        <div id="profile" class="profil" style="display: flex; flex-direction: column;">
            <div>
                <H2 style="margin-left: 1%;">Profil lembaga</H2>
            </div>
            <div style="display: flex; flex-direction: row;">
                <div class="profiltitle" style="align-items: center; text-align: center;">
                    <H2 style="line-height: 10%; margin-top: 20px;">Apa itu</H2>
                    <H1>KURSUSIT.id??</H1>
                </div>
                <div class="desc">
                    <p>KURSUSIT.id adalah platform marketplace edukasi IT dan pengembangan diri berbasis online yang
                        dapat diakses kapan saja dan di mana saja untuk mendampingi generasi muda Indonesia
                        #sampaijadibisa
                    </p>
                </div>
            </div>
            <div class="descprofil" style="display: flex; flex-direction: row; width: 100%; margin-bottom: 10%;">
                <div style="width: 8%;"></div>
                <div style="width: 90%;"> Sebuah pertanyaan dalam hati nurani, "Apa bener pendidikan cuman dibatasi oleh
                    sekolah formal?" Faktanya, engga semua orang bisa sekolah formal dan nyatanya pendidikan formal
                    belum bisa menyelesaikan masalah pengangguran di Indonesia. Di awal tahun 2019, kami coba membuat
                    platform pendidikan vokasi untuk menjembatani skill gap yang dirasakan Generasi Y dan Z di Indonesia
                    agar bisa berkompetisi di industri yang super cepat ini.
                    Saat ini, 250.000+ user sudah belajar dan menjadi member di platform Luarsekolah, sudah puluhan
                    trainer juga yang sudah mendaftar dan menjadi mentor di paltform kita. Masih banyak yang mesti kita
                    lakukan, dengan bantuan kawan-kawan semua, kita bisa bangun pendidikan Indonesia menuju ke arah yang
                    lebih baik.</div>
            </div>
            <div style="width: 2%;"></div>
        </div>

        <div class="berita" style="background-image: url(./src/image/bg3.jpg);" id="news">
            <div>
                <h2 style="margin-left: 1%;">
                    Berita dan artikel
                </h2>
                <div class="kategori-dropdown">
                    <div class="dropdown-content">
                        <select id="category-select">
                            <option value="all">All</option>
                            <option value="technology">Technology</option>
                            <option value="education">Education</option>
                            <option value="professional">Professional</option>
                        </select>
                    </div>
                </div>
            </div>
            <div class="berita1" style="display: flex; flex-direction: row;">
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 1.jpeg" alt="gambar1">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">Teknisi Komputer: Tugas, Skill yang Harus Dimiliki dan Jurusan
                            Kuliahnya</h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">
                        pernah mendengar profesi teknisi komputer? Apa saja tugas teknisi komputer dan skill apa yang
                        harus dimiliki?
                    </div>
                    <button class="read-button"> <a href="./news/1.html">Read</a></button>
                </div>
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 2.jpg" alt="gambar2">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">Kemdikbud & Harvard University Luncurkan Pelatihan Digital buat
                            Guru, Yuk Daftar!</h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">
                        Kemendikbudristek, LPDP, dan Harvard University membuka program pelatihan skill digital untuk
                        guru. Sertifikat dari Harvard!
                    </div>
                    <button class="read-button"> <a href="./news/2.html">Read</a></button>

                </div>
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 3.jpg" alt="gambar3">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">
                            Teknologi Informasi: Pengertian, Fungsi, Contoh, dan Prediksi Masa Depan
                        </h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">

                        Teknologi informasi atau TI berpengaruh besar pada kehidupan manusia. Ketahui pengertian,
                        fungsi, contoh penerapan, dan prediksi di masa depan.
                    </div>
                    <button class="read-button"> <a href="./news/3.html">Read</a></button>

                </div>
                <div class="card2" style="display: flex; flex-direction: column;">
                    <div class="card2top">
                        <img src="./src/image/berita 4.jpg" alt="gambar4">
                    </div>
                    <div class="card2mid">
                        <h3 style="font-size: x-small;">
                            ITS Buka Prodi S1 Rekayasa AI & Perangkat Lunak, Begini Prospeknya
                        </h3>
                    </div>
                    <div class="card2bottom" style="font-size: xx-small;">
                        ITS membuka prodi S1 Rekayasa Perangkat Lunak (Software Engineering) dan S1 Rekayasa Kecerdasan
                        Buatan (Artificial Intelligence/AI Engineering), nih!
                    </div>
                    <button class="read-button"> <a href="./news/4.html">Read</a></button>

                </div>
            </div>
            <div style="text-align: right; display: flex; align-items: right; justify-content: right;">
                <button style="background-color: #1E488F; 
               background-image: linear-gradient(to bottom, #0a49b5, #15545e); 
               color: white; /* Warna teks putih */
               border: none; /* Tidak ada border */
               border-radius: 10px; /* Corner bulat */
               padding: 5px 10px; /* Padding */
               font-size: 13px; /* Ukuran font */
               cursor: pointer; /* Kursor pointer */
               box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1), 0 1px 3px rgba(0, 0, 0, 0.08); /* Shadow */
               margin: 5px;
               display: flex;
               justify-content: right;
               align-items: right;
               outline: none; /* Tidak ada outline saat focus */">
                more>>
                </button>
            </div>

        </div>
        <div class="galeri" id="gallery">
            <div>
                <H2 style="margin-left: 1%;">
                    Galeri
                </H2>
            </div>

            <div class="gallery-wrap">
                <img src="./src/image/back.png" alt="" id="backBtn"/>
                <div class="gallery">
                  <div style="height: 300px !important;">
                    <span><img src="./src/image/devops.jpg" alt="" /></span>
                    <span><img src="./src/image/database.jpg" alt="" /></span>
                    <span><img src="./src/image/db.jpg" alt="" /></span>
                  </div>
                  <div style="height: 300px !important;">
                    <span><img src="./src/image/data.jpg" alt="" /></span>
                    <span>
                        <video id="myVideo" src="./src/video/web2.mp4" controls autoplay loop></video>
                    </span>
                    <span>
                        <video id="myVideo" src="./src/video/web1.mp4" controls autoplay loop></video>
                    </span>
                  </div>
                </div>
                <img src="./src/image/next.png" alt="" id="nextBtn"/>
              </div>
        </div>
    </div>
    </div>

    <div class="footer" id="contact" style="display: flex; flex-direction: column;">
        <div class="contact">
            <h2 style="margin: 0%; margin-left: 20px; margin-top: 20px;">
                Contact
            </h2>
        </div>
        <div class="contact2"
            style="width: 100%; display: flex; flex-direction: row; justify-content: center; align-items: center;">
            <div style="width: 50%; text-align: justify; padding: 20px;">
                Tertarik untuk mengetahui lebih lanjut mengenai KURSUSIT.ID training ataupun sertifikasi? atau pertanyaan
                lainnya? anda dapat bertanya secara langsung melalui chat whatsapp kami.
            </div>
            <div style="width: 20%; text-align: justify;">
                <ul>
                    <p>Contacts</p>
                    <li>Jl Permata senaya no 18</li>
                    <li>info@kursusit@gmail.com</li>
                    <li>0822118111199</li>
                    <li>Senin - Jumat 09.00 - 21.00</li>
                </ul>
            </div>
            <div style="width: 20%; text-align: justify; margin-left: 50px;">
                <p>Services</p>
                <ul>
                    <li>Training</li>
                    <li>Sertifikasi</li>
                    <li>Event</li>
                </ul>
            </div>
            <div class="socmed-logo" style="width: 10%; display: flex; flex-direction: column;">
                <div class="instagram" style="height: 40%;">
                    <a href="https://www.instagram.com/">
                        <img style="width: 40px;" src="./src/image/instapng.png" alt="Instagram">
                    </a>
                </div>
                <div style="padding: 10px;"></div>
                <div class="facebook" style="height: 40%;">
                    <a href="https://www.facebook.com/">
                        <img style="width: 40px;" src="./src/image/fblogo.png" alt="Facebook">
                    </a>
                </div>
                
            </div>
            
        </div>
    </div>

    <div id="registerModal" class="modal">
        <div class="modal-content">
          <span class="close" onclick="closeModalreg()">&times;</span>
          <h2>Register</h2>
          <form id="registerForm">
            <label for="fullname">Nama Lengkap:</label>
            <input type="text" id="fullname" name="fullname" required><br>
            
            <label for="email">Email:</label>
            <input type="email" id="email" name="email" required><br>
            
            <label for="password">Password:</label>
            <input type="password" id="password" name="password" required><br>
            
            <label for="address">Alamat:</label>
            <textarea id="address" name="address" required></textarea><br>
            
            <label for="gender">Gender:</label>
            <select id="gender" name="gender" required>
              <option value="male">Male</option>
              <option value="female">Female</option>
              <option value="other">Other</option>
            </select><br>
            
            <button type="submitregister" id="registerButton">Daftar</button>
          </form>
        </div>
      </div>

          <!-- Modal Login -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">&times;</span>
            <h2>Login</h2>
            <form id="loginForm">
                <label for="emailLogin">email:</label>
                <input type="text" id="emailLogin" name="emailLogin" required>
    
                <label for="passwordLogin">Password:</label>
                <input type="password" id="passwordLogin" name="passwordLogin" required>
    
                <button type="submitlogin" id="loginButton">Login</button>
            </form>
        </div>
    </div>
      

<script>
//############################# news kategori #####################################


//############################# percobaan load data news ########################
// fetch('./backend/news.json')
//             .then(response => response.json())
//             .then(data => {
//                 const newsContainer = document.getElementById('news');
//                 // Lakukan iterasi melalui setiap berita dalam data
//                 data.forEach(news => {
//                     const card = document.createElement('div');
//                     card.classList.add('card2');

//                     const cardTop = document.createElement('div');
//                     cardTop.classList.add('card2top');
//                     const image = document.createElement('img');
//                     image.src = news.image;
//                     cardTop.appendChild(image);

//                     const cardMid = document.createElement('div');
//                     cardMid.classList.add('card2mid');
//                     const title = document.createElement('h3');
//                     title.textContent = news.title;
//                     cardMid.appendChild(title);

//                     const cardBottom = document.createElement('div');
//                     cardBottom.classList.add('card2bottom');
//                     cardBottom.textContent = news.description;

//                     const readButton = document.createElement('button');
//                     readButton.classList.add('read-button');
//                     readButton.textContent = 'Read';

//                     card.appendChild(cardTop);
//                     card.appendChild(cardMid);
//                     card.appendChild(cardBottom);
//                     card.appendChild(readButton);

//                     newsContainer.querySelector('.berita1').appendChild(card);
//                 });
//             })
//             .catch(error => {
//                 console.error('Error:', error);
//             });


//############################# percobaan ambil informasi course ##################################
fetch('./backend/courses.json')
            .then(response => response.json())
            .then(data => {
                const programsContainer = document.getElementById('programs1');

                // Loop through each course and create HTML elements to display them
                data.forEach(course => {
                    const courseCard = document.createElement('div');
                    courseCard.classList.add('card');

                    const courseTitle = document.createElement('h2');
                    courseTitle.textContent = course.title;

                    courseCard.appendChild(courseTitle);
                    programsContainer.appendChild(courseCard);

                    courseCard.addEventListener('click', () => {
                        // Populate modal with course data
                        document.getElementById('modalImage').src = course.image;
                        document.getElementById('modalTitle').textContent = course.title;
                        document.getElementById('modalDescription').textContent = course.description;
                        document.getElementById('modalCurriculum').textContent = "Curriculum: " + course.curriculum.join(", ");
                        document.getElementById('modalMentor').textContent = "Mentor: " + course.mentor;
                        document.getElementById('modalCost').textContent = "Biaya : Rp. " + course.cost;

                        // Display the modal
                        document.getElementById('myModal').style.display = 'block';
                    });
                });
            })
            .catch(error => console.error('Error fetching courses:', error));

        // Close the modal when the close button is clicked
        document.getElementsByClassName('closecourse')[0].addEventListener('click', () => {
            document.getElementById('myModal').style.display = 'none';
        });

        // Close the modal when the user clicks outside of it
        window.addEventListener('click', (event) => {
            if (event.target == document.getElementById('myModal')) {
                document.getElementById('myModal').style.display = 'none';
            }
        });




//##############################       modal ######################
  // Fungsi untuk menampilkan modal register
  function openModal() {
      var modal = document.getElementById("registerModal");
      modal.style.display = "block";
  }

  // Fungsi untuk menutup modal register
  function closeModalreg() {
      var modal = document.getElementById("registerModal");
      modal.style.display = "none";
  }

  // Fungsi untuk menampilkan modal login
  function openLoginModal() {
      var modal = document.getElementById("loginModal");
      modal.style.display = "block";
  }

  // Fungsi untuk menutup modal login
  function closeModal() {
      var modal = document.getElementById("loginModal");
      modal.style.display = "none";
  }

  // Fungsi untuk scroll otomatis
  function scrollToSection(sectionId) {
      var section = document.getElementById(sectionId);
      if (section) {
          window.scrollTo({
              top: section.offsetTop,
              behavior: 'smooth' // Animasi scroll
          });
      }
  }

  // Fungsi untuk melakukan registrasi
  document.getElementById('registerButton').addEventListener('click', async function(event) {
      event.preventDefault();
      
      const formData = new FormData(document.getElementById('registerForm'));
      const requestData = Object.fromEntries(formData.entries());
      
      try {
          const response = await fetch('/users/register', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify(requestData)
          });

          if (!response.ok) {
              const errorMessage = await response.text();
              throw new Error(errorMessage);
          }

          alert('Registrasi berhasil!');
          closeModalreg();

      } catch (error) {
          console.error('Error during registration:', error);
          alert('Registrasi gagal. Silakan coba lagi.');
      }
  });

  // Fungsi untuk melakukan login
  document.getElementById('loginForm').addEventListener('submit', async function(event) {
      event.preventDefault();

      const email = document.getElementById('emailLogin').value;
      const password = document.getElementById('passwordLogin').value;

      try {
          const response = await fetch('/users/login', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ email, password })
          });

          const responseData = await response.json();

          if (response.ok) {
              alert(responseData.message);
              closeModal();
              displayLogoutButton()
              displayFullname() //memanggil nama user yang akan ditampilkan ke web 
            

          } else {
              alert(responseData.message);
          }
      } catch (error) {
          console.error('Error during login:', error);
          alert('Login gagal. Silakan coba lagi.');
      }
  });


  //######################### percobaan ambil nama ##############################
  async function getFullnameByEmail(email) {
    try {
        console.log('tes email', email);
        const response = await fetch(`/users/fullname?email=${email}`);
        const data = await response.json();
        console.log('tes email 2', data);
        return data.fullname;
    } 
    catch (error) {
        console.error('Error fetching fullname:', error);
        throw new Error('Failed to fetch fullname');
    }
}

// Fungsi untuk menampilkan fullname di halaman HTML
async function displayFullname() {
    const emailInput = document.getElementById('emailLogin').value;
    try {
        const fullname = await getFullnameByEmail(emailInput);
        const loggednameElement = document.getElementById('loggedname');
        loggednameElement.innerHTML = `
        <h2 class="ambilnamaloginuser" ">Selamat Datang! ${fullname}</h2>`;
    } catch (error) {
        console.error('Failed to display fullname:', error);
    }
}



//################### percobaan pergantian tombol #######################
async function displayLogoutButton() {
    const accountDiv = document.getElementById('account');
    // Sembunyikan tombol login dan register
    accountDiv.innerHTML = `
        <div id="loggedname">aa</div>
        <button onclick="openLogoutModal()">Logout</button>
    `;
    
    // Mengatur tombol login dan register menjadi nonaktif setelah tombol logout ditampilkan
    document.getElementById('loginButton').disabled = true;
    document.getElementById('registerButton').disabled = true;

    document.addEventListener('DOMContentLoaded', function() {
    // Panggil displayLogoutButton() di sini
    displayLogoutButton();
});
}




//##################################################### slider galeri ##########################
let scrollContainer = document.querySelector('.gallery')
        let backBtn = document.getElementById('backBtn')
        let nextBtn = document.getElementById('nextBtn')

        scrollContainer.addEventListener("wheel", (evt) => {
            evt.preventDefault()
            scrollContainer.scrollLeft += evt.deltaY;
            scrollContainer.style.scrollBehavior = 'auto'

        })

        nextBtn.addEventListener("click", ()=> {
            scrollContainer.style.scrollBehavior = 'smooth'
            scrollContainer.scrollLeft += 900
        })

        backBtn.addEventListener("click", ()=> {
            scrollContainer.style.scrollBehavior = 'smooth'
            scrollContainer.scrollLeft -= 900
        })




//######################################### search box ##########################################
function openSearchModal() {
        const searchModal = document.getElementById('searchModal');
        const modalContent = document.querySelector('.modal-content-search');
        searchModal.style.display = 'block';
        modalContent.style.width = '800px';
    }

    function openDisplaySearchModal(){
        const searchResultsModal = document.getElementById('searchResultsModal');
        const modalContent = document.querySelector('.modal-content-search-display');
        searchResultsModal.style.display = 'block';
        modalContent.style.width = '800px';
    }


    function closeSearchModal() {
        const searchModal = document.getElementById('searchModal');
        searchModal.style.display = 'none';
    }

    function closeDisplaySearchModal() {
        const searchModal = document.getElementById('searchResultsModal');
        searchModal.style.display = 'none';
        const modalContent = document.getElementById('searchResultsContent');
    modalContent.innerHTML ='';
        closeSearchModal()
    }

    async function search() {
        const searchInput = document.getElementById('searchInput').value.toLowerCase().trim();
        fetch('./backend/courses.json')
            .then(response => response.json())
            .then(data => {
                const searchResults = data.filter(course => {
                    return course.title.toLowerCase().includes(searchInput);
                });
                console.log('tes', searchResults);
                closeSearchModal()
                displaySearchResults(searchResults);
            })
            .catch(error => console.error('Error fetching courses:', error));
    }

    async function displaySearchResults(results) {
        openDisplaySearchModal()
        const modalContent = document.getElementById('searchResultsContent');
        // modalContent.innerHTML = ''; // Clear previous search results

        // Menambahkan tombol close
    const closeButton = document.createElement('span');
    closeButton.classList.add('close');
    closeButton.innerHTML = '&times;';
    closeButton.onclick = closeDisplaySearchModal;
    modalContent.appendChild(closeButton);

        results.forEach(course => {
            const courseCard = document.createElement('div');
            courseCard.classList.add('cardcourse');

            const leftSide = document.createElement('div');
            leftSide.classList.add('leftsidecourse');
            leftSide.innerHTML = `<img src="./backend/${course.image}" alt="${course.title}" style="width: 100%; height: 100%;">`;

            const rightSide = document.createElement('div');
            rightSide.classList.add('rightsidecourse');
            rightSide.innerHTML = `<div class='titlecourse'>${course.title}</div>
                                   <div class='desccourse'>${course.description}</div>`;

            courseCard.appendChild(leftSide);
            courseCard.appendChild(rightSide);

            modalContent.appendChild(courseCard);
            modalContent.style.width = '800px'
        });

        // openSearchModal(); // Open modal to display search results
    }



//########################################### akun ###################
// // Fungsi untuk menampilkan modal akun
// function openAccountModal() {
//     // Kirim permintaan untuk memeriksa apakah pengguna sudah login
//     fetch('/users/isLoggedIn')
//         .then(response => response.json())
//         .then(data => {
//             console.log('tesdata',data);
//             if (data.isLoggedIn) {
//                 // Jika pengguna sudah login, tampilkan modal akun
//                 fetch('/users/fullname?email=' + data.emailLoggedin) // Ambil informasi pengguna dari backend
//                     .then(response => response.json())
//                     .then(userData => {
//                         // console.log('tesakun',userData); berhasil
//                         const { fullname, email, gender, address } = userData;
//                         console.log('tess',fullname, email, gender, address);
//                         // Mengisi modal dengan informasi pengguna
//                         document.getElementById('accountfullname').innerHTML = `<p>${fullname}</p>`;
//                         document.getElementById('accountemail').innerHTML = `<p>${email}</p>`;
//                         document.getElementById('gender').innerHTML = `<p>${gender}</p>`;
//                         document.getElementById('address').innerHTML = `<p>${address}</p>`;
//                         // Menampilkan modal
//                         document.getElementById('accountModal').style.display = 'block';
//                     })
//                     .catch(error => console.error('Error fetching user data:', error));
//             } else {
//                 // Jika pengguna belum login, tampilkan pesan atau lakukan tindakan lain
//                 alert('Anda belum login. Silakan login terlebih dahulu.');
//             }
//         })
//         .catch(error => console.error('Error checking login status:', error));
// }

// // Fungsi untuk menutup modal akun
// function closeAccountModal() {
//     document.getElementById('accountModal').style.display = 'none';
// }


function openModalAccountBase() {
        // Kirim permintaan untuk memeriksa apakah pengguna sudah login
        fetch('/users/isLoggedIn')
            .then(response => response.json())
            .then(data => {
                console.log('tesdata', data);
                if (data.isLoggedIn) {
                    // Jika pengguna sudah login, tampilkan modal akun
                    fetch('/users/fullname?email=' + data.emailLoggedin) // Ambil informasi pengguna dari backend
                        .then(response => response.json())
                        .then(userData => {
                            // console.log('tesakun',userData); berhasil
                            const { fullname, email, gender, address } = userData;
                            console.log('tess', fullname, email, gender, address);
                            // Mengisi modal dengan informasi pengguna
                            document.getElementById('accountfullname').innerHTML = `<p>Nama Lengkap: ${fullname}</p>`;
                            document.getElementById('accountemail').innerHTML = `<p>Email: ${email}</p>`;
                            document.getElementById('gender').innerHTML = `<p>Gender: ${gender}</p>`;
                            document.getElementById('address').innerHTML = `<p>Alamat: ${address}</p>`;
                            // Menampilkan modal
                            document.getElementById('accountModal').style.display = 'block';
                        })
                        .catch(error => console.error('Error fetching user data:', error));
                } else {
                    // Jika pengguna belum login, tampilkan pesan atau lakukan tindakan lain
                    alert('Anda belum login. Silakan login terlebih dahulu.');
                }
            })
            .catch(error => console.error('Error checking login status:', error));
    }

    // Fungsi untuk menutup modal akun
    function closeAccountModal() {
        document.getElementById('accountModal').style.display = 'none';
    }

    // Panggil openModalAccountBase saat tombol "Account" diklik
    function openAccountModal() {
        openModalAccountBase();
    }

</script>
    </body>
</html>
